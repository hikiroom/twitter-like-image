var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};!function(){var t=function(t){var e=t.parentElement;return __spreadArrays(e.children).indexOf(t)},e=function(){var t=window.navigator.userAgent.toLowerCase();return t.indexOf("msie")>=0?"ie":t.indexOf("edge")>=0||t.indexOf("edg")>=0?"edge":t.indexOf("chrome")>=0?"chrome":t.indexOf("safari")>=0?"safari":t.indexOf("firefox")>=0?"firefox":t.indexOf("opera")>=0?"opera":"others"},i=function(){function i(t){this._root=t,this._items=null,this._itemsLength=0,this._activeItemIdx=-1,this._detail=new n(this),this.init()}return Object.defineProperty(i.prototype,"root",{get:function(){return this._root},set:function(t){this._root=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"itemsLength",{get:function(){return this._itemsLength},set:function(t){this._itemsLength=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeItemIdx",{get:function(){return this._activeItemIdx},set:function(t){this._activeItemIdx=t,t>-1&&(this.detail.moveDetailContent(),this.detail.switchMoveBtns())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"detail",{get:function(){return this._detail},set:function(t){this._detail=t},enumerable:!1,configurable:!0}),i.prototype.init=function(){this.insertContentElement(),this.activate(),this.setEvent(),"safari"===e()&&this.adjustGridTemplateRow()},i.prototype.insertContentElement=function(){this.root.insertAdjacentHTML("afterbegin",'\n                <div class="TLImageViewer-content"></div>\n            ')},i.prototype.activate=function(){var t=this.root.querySelector(".TLImageViewer-content"),e=this.root.querySelectorAll("img"),i=e.length,n=0===i;e.forEach((function(e){e.classList.add("TLImageViewer-content-item"),t.insertAdjacentElement("beforeend",e)})),this.items=e,this.itemsLength=i,this.root.classList.add("TLImageViewer"),this.root.dataset.item=String(i),this.detail.setItems(this.items),n&&console.error('Probably the wrong construction.\nCorrect construction is "* > img"')},i.prototype.setEvent=function(){var t=this;Array.prototype.forEach.call(this.items,(function(e){e.addEventListener("click",t.itemClick.bind(t))}))},i.prototype.itemClick=function(e){var i=e.target;this.activeItemIdx=t(i),this.detail.show()},i.prototype.adjustGridTemplateRow=function(){new ResizeObserver((function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e].target,o=n.offsetHeight;n.style.gridTemplateRows=o/2+"px "+o/2+"px"}})).observe(this.root.querySelector(".TLImageViewer-content"))},i}(),n=function(){function t(t){this._root=null,this._content=null,this._items=null,this._template="",this._visibility=!1,this._relationViewer=t,this._prevBtn=!1,this._nextBtn=!1,this._transitionendClass=!1,this._caption="",this._touchPoint={x:0,y:0},this.init()}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root},set:function(t){this._root=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._visibility},set:function(t){this._visibility=t,t?this.root.classList.add("is-visible"):this.root.classList.remove("is-visible")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(t){var e=this.root.querySelector(".TLImageViewerDetail-content");t?t.forEach((function(t){var i=document.createElement("li"),n=t.cloneNode();n.classList.remove("TLImageViewer-content-item"),n.classList.add("TLImageViewerDetail-content-list-item"),i.classList.add("TLImageViewerDetail-content-list"),i.append(n),e.append(i)})):e.querySelectorAll(".TLImageViewerDetail-content-list").forEach((function(t){t.remove()}));this._items=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"relationViewer",{get:function(){return this._relationViewer},set:function(t){this._relationViewer=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevBtn",{get:function(){return this._prevBtn},set:function(t){var e=this.root.querySelector(".TLImageViewerDetail-prev");t?e.classList.add("is-visible"):e.classList.remove("is-visible"),this._prevBtn=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextBtn",{get:function(){return this._nextBtn},set:function(t){var e=this.root.querySelector(".TLImageViewerDetail-next");t?e.classList.add("is-visible"):e.classList.remove("is-visible"),this._nextBtn=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitionendClass",{get:function(){return this._transitionendClass},set:function(t){t?this.root.classList.add("is-transitionend"):this.root.classList.remove("is-transitionend"),this._transitionendClass=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this._caption},set:function(t){this.root.querySelector(".TLImageViewerDetail-caption").innerText=t,this._caption=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"touchPoint",{get:function(){return this._touchPoint},set:function(t){this._touchPoint=t},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.insertTemplate(),this.setEvent()},t.prototype.insertTemplate=function(){var t='\n                <div class="TLImageViewerDetail">\n                    <ul class="TLImageViewerDetail-content"></ul>\n                    <p class="TLImageViewerDetail-caption"></p>\n                    <button type="button" class="TLImageViewerDetail-prev"><span>prev</span></button>\n                    <button type="button" class="TLImageViewerDetail-next"><span>next</span></button>\n                    <button type="button" class="TLImageViewerDetail-close"><span>close</span></button>\n                </div>\n            ';this.relationViewer.root.insertAdjacentHTML("beforeend",t),this.template=t,this.root=this.relationViewer.root.querySelector(".TLImageViewerDetail"),this.content=this.relationViewer.root.querySelector(".TLImageViewerDetail-content")},t.prototype.setEvent=function(){var t=this.root.querySelector(".TLImageViewerDetail-prev"),e=this.root.querySelector(".TLImageViewerDetail-next"),i=this.root.querySelector(".TLImageViewerDetail-close");t.addEventListener("click",this.movePrev.bind(this)),e.addEventListener("click",this.moveNext.bind(this)),i.addEventListener("click",this.hide.bind(this)),this.content.addEventListener("click",this.hide.bind(this)),this.root.addEventListener("transitionend",this.setTransitionendClass.bind(this))},t.prototype.setItems=function(t){this.items=t},t.prototype.show=function(){this.visibility=!0,this.moveDetailContent(),this.switchMoveBtns(),this.setCaption()},t.prototype.hide=function(){this.transitionendClass&&(this.visibility=!1)},t.prototype.movePrev=function(){this.relationViewer.activeItemIdx--,this.setCaption()},t.prototype.moveNext=function(){this.relationViewer.activeItemIdx++,this.setCaption()},t.prototype.moveDetailContent=function(){var t=100*this.relationViewer.activeItemIdx;this.content.style.transform="translateX(-"+t+"%)"},t.prototype.switchMoveBtns=function(){var t=this.relationViewer.activeItemIdx,e=this.relationViewer.itemsLength-1;this.prevBtn=0<t,this.nextBtn=t<e},t.prototype.setCaption=function(){var t=this.relationViewer.activeItemIdx,e=this.relationViewer.items[t].alt;this.caption=e},t.prototype.setTransitionendClass=function(t){"opacity"===t.propertyName&&(this.transitionendClass?this.transitionendClass=!1:this.transitionendClass=!0)},t}();window.TLImageViewer=i}();